import{r as i,o as w,x as c,y as s,D as b,E as h,z as u,F as x,G as B,H as E,I as k,v as d}from"./F2qTBu9o.js";import{_ as C}from"./DlAUqK2U.js";const j={class:"container mx-auto p-4"},S={type:"submit",class:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600"},T={class:"bg-white shadow-md rounded-lg"},D=["onClick"],N=["onClick"],A={key:0,class:"mt-4 text-green-500"},F={key:1,class:"mt-4 text-red-500"},M={__name:"books",setup(U){const m=i([]),n=i({name:"",price:""}),a=i(""),r=i(""),l=i(!1);let p=null;const v=async()=>{try{const e=await fetch("/api/books");e.ok?m.value=await e.json():console.error("Failed to fetch books")}catch(e){console.error("Error fetching books:",e)}},y=async()=>{try{const e=l.value?"PUT":"POST",o=await fetch("/api/books",{method:e,headers:{"Content-Type":"application/json"},body:JSON.stringify({...n.value,id:p})}),t=await o.json();o.ok?(a.value=l.value?"Book updated successfully":"Book added successfully",r.value="",n.value={name:"",price:""},l.value=!1,p=null,await v()):(r.value=t.error,a.value="")}catch(e){console.error("Error saving book:",e),r.value="An error occurred while saving the book.",a.value=""}},f=e=>{n.value={name:e.name,price:e.price},l.value=!0,p=e._id},_=async e=>{if(confirm("Are you sure you want to delete this book?"))try{const o=await fetch("/api/books",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})}),t=await o.json();o.ok?(a.value=t.message,r.value="",await v()):(r.value=t.error,a.value="")}catch(o){console.error("Error deleting book:",o),r.value="An error occurred while deleting the book.",a.value=""}};return w(v),(e,o)=>(d(),c("div",j,[o[2]||(o[2]=s("h1",{class:"text-2xl font-bold mb-4"},"Book Management",-1)),s("form",{onSubmit:x(y,["prevent"]),class:"mb-4"},[b(s("input",{"onUpdate:modelValue":o[0]||(o[0]=t=>n.value.name=t),type:"text",placeholder:"Book Name",class:"border p-2 mr-2",required:""},null,512),[[h,n.value.name]]),b(s("input",{"onUpdate:modelValue":o[1]||(o[1]=t=>n.value.price=t),type:"number",placeholder:"Price",class:"border p-2 mr-2",required:""},null,512),[[h,n.value.price]]),s("button",S,u(l.value?"Update Book":"Add Book"),1)],32),s("ul",T,[(d(!0),c(B,null,E(m.value,t=>(d(),c("li",{key:t._id,class:"flex justify-between items-center p-4 border-b"},[s("span",null,u(t.name)+" - $"+u(t.price),1),s("div",null,[s("button",{onClick:g=>f(t),class:"px-2 py-1 bg-yellow-500 text-white rounded hover:bg-yellow-600 mr-2"},"Edit",8,D),s("button",{onClick:g=>_(t._id),class:"px-2 py-1 bg-red-500 text-white rounded hover:bg-red-600"},"Delete",8,N)])]))),128))]),a.value?(d(),c("p",A,u(a.value),1)):k("",!0),r.value?(d(),c("p",F,u(r.value),1)):k("",!0)]))}},O=C(M,[["__scopeId","data-v-bacfad8c"]]);export{O as default};
